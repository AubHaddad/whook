[//]: # ( )
[//]: # (This file is automatically generated by a `metapak`)
[//]: # (module. Do not change it  except between the)
[//]: # (`content:start/end` flags, your changes would)
[//]: # (be overridden.)
[//]: # ( )
# @whook/http-server
> The Whook base HTTP server

[![GitHub license](https://img.shields.io/badge/license-MIT-blue.svg)](https://github.com/nfroidure/whook/blob/main/packages/whook-http-server/LICENSE)


[//]: # (::contents:start)

The [Whook](https://github.com/nfroidure/whook)'s `httpServer` service is
responsible for instanciating the NodeJS HTTP Server and handling its
start/shutdown.

It can be easily replaced by any other HTTP server (an HTTPS one for instance if
you cannot use a gateway or a proxy to handle HTTPS connections).

The server takes in charge graceful shutdown by awaiting connections to be
closed before shutting down which can take a long time (basically if a browser
is still maintaining an open socket with it). You can short circuit this
behavior, basically for development, by setting the `DESTROY_SOCKETS=1`
environment variable.

[//]: # (::contents:end)

# API
## Functions

<dl>
<dt><a href="#initHTTPServer">initHTTPServer(services)</a> ⇒ <code><a href="#HTTPServer">Promise.&lt;HTTPServer&gt;</a></code></dt>
<dd><p>Initialize an HTTP server</p>
</dd>
</dl>

## Typedefs

<dl>
<dt><a href="#HTTPServer">HTTPServer</a></dt>
<dd></dd>
</dl>

<a name="initHTTPServer"></a>

## initHTTPServer(services) ⇒ [<code>Promise.&lt;HTTPServer&gt;</code>](#HTTPServer)
Initialize an HTTP server

**Kind**: global function  
**Returns**: [<code>Promise.&lt;HTTPServer&gt;</code>](#HTTPServer) - A promise of an object with a NodeJS HTTP server
 in its `service` property.  

| Param | Type | Default | Description |
| --- | --- | --- | --- |
| services | <code>Object</code> |  | The services the server depends on |
| [services.ENV] | <code>Object</code> |  | The process environment variables |
| services.ENV.DESTROY_SOCKETS | <code>String</code> |  | Whether the server sockets whould be destroyed or if the  server should wait while sockets are kept alive |
| services.HOST | <code>String</code> |  | The server host |
| services.PORT | <code>Number</code> |  | The server port |
| [services.MAX_HEADERS_COUNT] | <code>Number</code> |  | The https://nodejs.org/api/http.html#http_server_maxheaderscount |
| [services.KEEP_ALIVE_TIMEOUT] | <code>Number</code> |  | See https://nodejs.org/api/http.html#http_server_keepalivetimeout |
| [services.MAX_CONNECTIONS] | <code>Number</code> |  | See https://nodejs.org/api/net.html#net_server_maxconnections |
| [services.SOCKET_TIMEOUT] | <code>Number</code> |  | See https://nodejs.org/api/http.html#http_server_timeout |
| services.httpRouter | <code>function</code> |  | The function to run with the req/res tuple |
| [services.log] | <code>function</code> | <code>noop</code> | A logging function |

<a name="HTTPServer"></a>

## HTTPServer
**Kind**: global typedef  

# Authors
- [Nicolas Froidure](http://insertafter.com/en/index.html)

# License
[MIT](https://github.com/nfroidure/whook/blob/main/packages/whook-http-server/LICENSE)
